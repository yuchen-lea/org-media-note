[[file:CHANGELOG.org][Changelog]]

* åŠŸèƒ½ä»‹ç»
è¿™æ˜¯ä¸€ä¸ªæ–¹ä¾¿åœ¨ org-mode ä¸­ä¸ºè§†é¢‘ã€éŸ³é¢‘åšç¬”è®°çš„æ’ä»¶ã€‚åŸºæœ¬åŠŸèƒ½ï¼š

- æ”¯æŒæœ¬åœ°åª’ä½“å’Œåœ¨çº¿åª’ä½“ï¼ˆéœ€è¦å®‰è£… yt-dlpï¼Œå‚è§[[åœ¨çº¿è§†é¢‘æ’­æ”¾]]ï¼‰
- æ§åˆ¶å¤šåª’ä½“ï¼šæ’­æ”¾è¿›åº¦ã€é€Ÿåº¦ã€éŸ³é‡ç­‰
- å®šä¹‰äº† =video=, =audio= ä¸¤ç§é“¾æ¥
  + *æ—¶é—´æˆ³é“¾æ¥* ç±»ä¼¼ =[[video:course.mp4#0:01:56][0:01:56]]=
    - åœ¨æ’­æ”¾å¤šåª’ä½“æ—¶ï¼Œå¦‚æœå½“å‰å…‰æ ‡ä½äºä¸€ä¸ªä»¥ org-media-note é“¾æ¥å¼€å¤´çš„åˆ—è¡¨ï¼ˆä¾‹å¦‚ =- [[video:test.mp4#0:02:33][0:02:33]] note=ï¼‰ï¼Œ=M-RET= ä¼šè‡ªåŠ¨æ’å…¥å½“å‰æ—¶é—´æˆ³çš„é“¾æ¥
    - å›é¡¾ç¬”è®°æ—¶ï¼Œç‚¹å‡»é“¾æ¥å¯è·³è½¬åˆ°æŒ‡å®šæ—¶é—´æˆ³æ’­æ”¾
  + *åŒºé—´å¾ªç¯é“¾æ¥* ç±»ä¼¼ =[[video:course.mp4#0:01:56-0:01:58][0:01:56-0:01:58]]=
    - åœ¨æ’­æ”¾å¤šåª’ä½“æ—¶ï¼Œå¦‚æœåœ¨ABå¾ªç¯ï¼Œåˆ™æ’å…¥åŒºé—´å¾ªç¯é“¾æ¥
    - å›é¡¾ç¬”è®°æ—¶ï¼Œç‚¹å‡»é“¾æ¥å¯è·³è½¬åˆ°0:01:56æ’­æ”¾ï¼Œå¹¶åœ¨0:01:56-0:01:58è¿›è¡ŒåŒºé—´å¾ªç¯
- è®°å½•ç¬”è®°æ—¶ï¼Œå¯ä»¥å¿«é€Ÿ:
  + æ’å…¥æ—¶é—´æˆ³æˆ–åŒºé—´å¾ªç¯é“¾æ¥
  + æ’å…¥å½“å‰è§†é¢‘æˆªå›¾æˆ–è€…GIF
  + æ’å…¥å½“å‰å­—å¹•
  + åˆå¹¶å¤šæ¡ç¬”è®°ï¼Œé€‚åˆåœ¨å¯¼å…¥å­—å¹•åçš„æ•´ç†ã€‚
- æ’å…¥æ—¶é—´æˆ³æ—¶ï¼Œå¯é¢å¤–è®¾ç½®ï¼š
  + æ˜¯å¦è‡ªåŠ¨æ’å…¥å½“å‰çš„è§†é¢‘æˆªå›¾
  + æ˜¯å¦åœ¨æ’å…¥æ—¶é—´æˆ³åè‡ªåŠ¨æš‚åœ
- å¯ä»¥ä»å·²æœ‰æ–‡ä»¶å¯¼å…¥ç¬”è®°ï¼Œç›®å‰æ”¯æŒçš„æ ¼å¼ï¼š
  + å­—å¹•æ–‡ä»¶ï¼šSRTã€VTTã€ASS
  + å½“å‰æ’­æ”¾æ–‡ä»¶çš„ç« èŠ‚åˆ—è¡¨
  + PotPlayer ç”Ÿæˆçš„ PBF æ–‡ä»¶
  + ç”± [[https://www.notedapp.io/][Noted]] å¯¼å‡ºçš„ TXT æ–‡ä»¶
  + [[https://orgmode.org/manual/Timers.html][Timers]]

å¦‚æœä½ ä½¿ç”¨ [[https://github.com/jkitchin/org-ref][org-ref]]ï¼Œå¯ä»¥ä¸ org-ref ç¬”è®°ååŒä½¿ç”¨ï¼š

- å¯ä»¥åœ¨ org-ref ç¬”è®°ä¸­å¿«é€Ÿæ‰“å¼€è¯¥æ¡ç›®å¯¹åº”çš„åª’ä½“æ–‡ä»¶
- å®šä¹‰äº† =videocite=, =audiocite= ä¸¤ç§é“¾æ¥
  + é“¾æ¥æ ¼å¼ç±»ä¼¼ =[[videocite:key#0:01:56][0:01:56]]= æˆ–  =[[videocite:key#0:01:56-0:01:58][0:01:56-0:01:58]]=
  + ç‚¹å‡»é“¾æ¥ï¼Œå¯è·³è½¬åˆ°keyå¯¹åº”çš„æ–‡ä»¶çš„æŒ‡å®šæ—¶é—´æˆ³æ’­æ”¾ï¼Œæˆ–è€…è¿›è¡ŒåŒºé—´å¾ªç¯
  + å…‰æ ‡æˆ–é¼ æ ‡ç½®äºé“¾æ¥æ—¶ï¼Œæ˜¾ç¤º bib æ¡ç›®çš„ç›¸å…³ä¿¡æ¯
  + å¯ä»¥å¿«é€Ÿæ‰“å¼€è¯¥ bib æ¡ç›®çš„ org-ref åŠ¨ä½œåˆ—è¡¨ï¼Œæ‰§è¡Œç›¸åº”åŠ¨ä½œï¼Œä¾‹å¦‚è·³è½¬åˆ°å¯¹åº”ç¬”è®°ç­‰

* åŠŸèƒ½æ¼”ç¤º

å¿«é€Ÿæ‰“å¼€org-refå¯¹åº”çš„è§†é¢‘ï¼Œæ’­æ”¾ç½®é¡¶ï¼Œå¿«é€Ÿæ’å…¥å½“å‰æ—¶é—´æˆ³ã€å­—å¹•

[[../demo/org-media-note-add.gif?raw=true]]

æ’å…¥å½“å‰è§†é¢‘æˆªå›¾ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ¯æ¬¡æ’å…¥æ–°ç¬”è®°æ—¶ï¼Œè‡ªåŠ¨æ’å…¥æˆªå›¾
[[../demo/org-media-note-screenshot.gif?raw=true]]

ç‚¹å‡»é“¾æ¥ï¼Œä»è§†é¢‘æŒ‡å®šä½ç½®æ’­æ”¾ï¼›å…‰æ ‡ä½äºé“¾æ¥æ—¶ï¼Œminibufferå±•ç¤ºorg-refç›¸å…³ä¿¡æ¯
[[../demo/org-media-note-follow.gif?raw=true]]

æ‰“å¼€åœ¨çº¿è§†é¢‘åï¼Œä¸æœ¬åœ°æ–‡ä»¶çš„æ“ä½œç›¸åŒï¼
[[../demo/org-media-note-online-video-zh.gif?raw=true]]

* å¿«é€ŸæŒ‡å—

- doom ç”¨æˆ·
  1. å®‰è£…
      #+BEGIN_SRC emacs-lisp :tangle "packages.el"
 (package! org-media-note :recipe (:host github :repo "yuchen-lea/org-media-note"))
      #+END_SRC
  2. é…ç½®
     + ä¸éœ€è¦é…åˆ org-ref
       #+BEGIN_SRC emacs-lisp
   (use-package! org-media-note
   :hook (org-mode .  org-media-note-mode)
   :bind (
         ("H-v" . org-media-note-hydra/body))  ;; ä¸»åŠŸèƒ½å…¥å£
   :config
   (setq org-media-note-screenshot-image-dir "~/Notes/imgs/")  ;; ç”¨äºå­˜å‚¨è§†é¢‘æˆªå›¾çš„ç›®å½•
   )
       #+END_SRC
     + éœ€è¦é…åˆ org-ref
       #+BEGIN_SRC emacs-lisp
   (use-package! org-media-note
   :init (setq org-media-note-use-org-ref t)
   :hook (org-mode .  org-media-note-mode)
   :bind (
       ("H-v" . org-media-note-hydra/body))  ;; ä¸»åŠŸèƒ½å…¥å£
   :config
   (setq org-media-note-screenshot-image-dir "~/Notes/imgs/")  ;; ç”¨äºå­˜å‚¨è§†é¢‘æˆªå›¾çš„ç›®å½•
   (setq org-media-note-use-refcite-first t)  ;; æ’å…¥é“¾æ¥æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨refciteé“¾æ¥
   )
   #+END_SRC
- é doom ç”¨æˆ·ï¼šå¯ä»¥é€‰æ‹©
  + æ‰‹åŠ¨ä¸‹è½½org-media-noteï¼Œå°†å…¶åŒ…å«åœ¨=load-path=ä¸­ï¼Œç„¶åå‚è€ƒä¸Šè¿°é…ç½®
  + ä½¿ç”¨quelpa-use-packageï¼ˆæ„Ÿè°¢[[https://github.com/japhir][japhir]]æä¾›æ­¤ä»£ç ç‰‡æ®µï¼‰
      #+BEGIN_SRC emacs-lisp
(use-package quelpa-use-package)  ;; to allow installation of github packages
(use-package org-media-note
  :quelpa (org-media-note :fetcher github :repo "yuchen-lea/org-media-note")
  :hook (org-mode .  org-media-note-mode)
  :bind (("H-v" . org-media-note-hydra/body))  ;; Main entrance
  :config
  (setq org-media-note-screenshot-image-dir "~/notes/imgs/"))
      #+END_SRC
  + å¦‚æœä¸ä½¿ç”¨åƒ=package.el=æˆ–=straight=è¿™æ ·çš„åŒ…ç®¡ç†å™¨ï¼Œè€Œæ˜¯æ‰‹åŠ¨åŠ è½½org-media-noteï¼Œï¼Œéœ€è¦ä½¿ç”¨ =(require 'org-media-note-org-ref)=ã€‚

ç°åœ¨ï¼Œä½ å¯ä»¥ä» =org-media-note-hydra/body= è®¿é—®æ‰€æœ‰åŠŸèƒ½ã€‚

â„¹ è¿™é‡Œï¼Œæˆ‘ç”¨ Hyper key =H= è¿›è¡Œç»‘å®šï¼Œå¥½å¤„åœ¨äºå¿«é€Ÿè§¦è¾¾ï¼Œä¸”ä¸ä¼šä¸å·²æœ‰å¿«æ·é”®å†²çªã€‚æ›´å¤šå‚è§ [[http://ergoemacs.org/emacs/emacs_hyper_super_keys.html][Emacs: How to Bind Super Hyper Keys]]ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®æˆä»»ä½•é€‚åˆä½ çš„å¿«æ·é”®ï¼Œæ¯•ç«Ÿè¿™æ˜¯Emacs ;)
* åŠŸèƒ½è¯¦è§£

æ‰€æœ‰åŠŸèƒ½éƒ½å¯ç”± =org-media-note-pretty-hydra/body= æˆ– =org-media-note-transient= è§¦è¾¾ï¼ˆå…·ä½“å‡½æ•°å–å†³äº =org-media-note-interface= å˜é‡çš„è®¾ç½®ï¼‰ï¼š

** pretty-hydra ui
[[../demo/org-media-note-hydra.png?raw=true]]

- Headerï¼šå±•ç¤ºå½“å‰æ’­æ”¾çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ–‡ä»¶è·¯å¾„ã€éŸ³é‡ã€æ’­æ”¾è¿›åº¦ã€æ’­æ”¾é€Ÿåº¦ç­‰
- Fileï¼šå…³äºè§†é¢‘æ–‡ä»¶çš„æ“ä½œ
  + =o= æ ¹æ®æƒ…å†µæ™ºèƒ½æ’­æ”¾  (=org-media-note-play-smart=)
    1. å¦‚æœå½“å‰å…‰æ ‡ä½äºæ–‡ä»¶é“¾æ¥ï¼Œæ’­æ”¾è¯¥æ–‡ä»¶
    2. å¦‚æœåœ¨org-refçš„ç¬”è®°æ¡ç›®ä¸­æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œåˆ™è‡ªåŠ¨æ‰“å¼€å½“å‰æ¡ç›®å¯¹åº”çš„åª’ä½“æ–‡ä»¶
       + éœ€è¦æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼š
         - å½“å‰ä½äºorg-refç¬”è®°ï¼Œå³ï¼Œå½“å‰headingçš„ =Custom_ID= å­˜æ”¾entry key
         - æ–‡ä»¶å¯é€šè¿‡ =bibtex-completion-find-pdf= è·å¾—ã€‚ä¸€èˆ¬åœ°ï¼Œä¿è¯å˜é‡ =bibtex-completion-pdf-field= çš„å€¼ä¸ºå­˜æ”¾æ–‡ä»¶è·¯å¾„çš„ field å³å¯ã€‚
         - æ–‡ä»¶ç±»å‹åŒ…å«äº =org-media-note--video-types= æˆ– =org-media-note--audio-types=
    3. å¦‚æœå¯¹åº”çš„attach dirä¸­æœ‰å¤šåª’ä½“æ–‡ä»¶ï¼Œåªæœ‰ä¸€ä¸ªåˆ™ç›´æ¥æ’­æ”¾ï¼Œæœ‰å¤šä¸ªä¾¿ä»attach dirä¸­é€‰æ‹©
    4. å¦‚æœä¸åŒ¹é…ä¸Šè¿°è§„åˆ™ï¼Œæ‰‹åŠ¨è¾“å…¥èµ„æºè·¯å¾„ï¼ˆæœ¬åœ°æˆ–åœ¨çº¿ï¼‰
  + =j= åˆ‡æ¢è§†é¢‘çš„å­—å¹•æ˜¾ç¤º
  + =T= åˆ‡æ¢mpvçš„ç½®é¡¶æ˜¾ç¤º
  + =c= æ’­æ”¾é€Ÿåº¦åŠ 0.1
  + =x= æ’­æ”¾é€Ÿåº¦å‡0.1
  + =z= æ’­æ”¾é€Ÿåº¦åœ¨åŸé€Ÿå’Œåˆšæ‰è‡ªå®šä¹‰é€Ÿåº¦ä¹‹é—´åˆ‡æ¢ (=org-media-note-mpv-toggle-speed=)
- Playbackï¼šå…³äºæ’­æ”¾è¿›åº¦çš„æ“ä½œ
  + =<SPC>= æ’­æ”¾/æš‚åœ
  + =l= è®¾ç½®A-Bå¾ªç¯ï¼Œå¦‚æœå·²è®¾ç½®ï¼Œä¼šæ˜¾ç¤ºå½“å‰çš„A-BåŒºé—´
  + =g= è·³è½¬åˆ°å½“å‰è¡Œæ‰€åŒ…å«çš„æ—¶é—´æˆ³ï¼Œæ–¹ä¾¿åœ¨æµè§ˆå¯¹åº”å­—å¹•æ—¶å¿«é€Ÿè·³è½¬ã€‚å¦‚æœå½“å‰è¡Œæ²¡æœ‰æ‰¾åˆ°æ—¶é—´æˆ³ï¼Œå¯ä»¥æ‰‹åŠ¨è¾“å…¥ã€‚
  + =<left>= åé€€5s
  + =<right>= å‰è¿›5s
  + =C-<left>= è·³è½¬åˆ°å‰ä¸€å­—å¹•
  + =C-<right>= è·³è½¬åˆ°åä¸€å­—å¹•
  + =<prior>= (å³=<PgUp>=) è·³è½¬åˆ°å‰ä¸€ç« èŠ‚
  + =<next>= (å³=<PgDown>=) è·³è½¬åˆ°åä¸€ç« èŠ‚
- Volumeï¼šå…³äºéŸ³é‡çš„æ“ä½œ
  + =+= éŸ³é‡åŠ 5
  + =-= éŸ³é‡å‡5
  + =0= éŸ³é‡åœ¨100å’Œåˆšæ‰è‡ªå®šä¹‰çš„éŸ³é‡ä¹‹é—´åˆ‡æ¢ (=org-media-note-mpv-toggle-volume=)
  + =m= åˆ‡æ¢é™éŸ³çŠ¶æ€
- Noteï¼šæ’å…¥ç¬”è®°
  + =i= æ’å…¥å½“å‰è§†é¢‘çš„é“¾æ¥ï¼Œæ ¹æ®ä¸åŒçš„è®¾ç½®å’Œæ’­æ”¾çŠ¶æ€ï¼Œå…·ä½“æ’å…¥çš„é“¾æ¥æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š(=org-media-note-insert-link=)
    - å½“å‰æ˜¯å¦ä¸ºA-Bå¾ªç¯
      + åœ¨è¿›è¡ŒA-Bå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯å½“ Playback ä¸­æ˜¾ç¤ºã€ŒClear A-B loop (xxx - xxx)ã€ï¼Œæ’å…¥ *åŒºé—´å¾ªç¯é“¾æ¥* ã€‚é“¾æ¥æè¿°é»˜è®¤ä¸ºå½“å‰ =Aç‚¹æ—¶é—´æˆ³-Bç‚¹æ—¶é—´æˆ³= ï¼Œå¯é€šè¿‡ =org-media-note-ab-loop-link-format= è¿›è¡Œè‡ªå®šä¹‰
      + æ²¡åœ¨è¿›è¡ŒA-Bå¾ªç¯ï¼Œæ’å…¥ *æ—¶é—´æˆ³é“¾æ¥* ã€‚é“¾æ¥æè¿°é»˜è®¤ä¸º =å½“å‰æ—¶é—´æˆ³= ï¼Œå¯é€šè¿‡ =org-media-note-timestamp-link-format= è¿›è¡Œè‡ªå®šä¹‰
    - æ˜¯å¦ä¼˜å…ˆä½¿ç”¨ref key
      + ä¼˜å…ˆä½¿ç”¨ref keyï¼Œå³ Toggle ä¸­æ˜¾ç¤º ã€ŒUse ref key instead of absolute path (*)ã€ï¼Œæ’å…¥ =videocite= æˆ– =audiocite= é“¾æ¥
      + å¦åˆ™ï¼Œå³ Toggle ä¸­æ˜¾ç¤º ã€ŒUse ref key instead of absolute path ( )ã€ï¼Œæ’å…¥ =video= æˆ– =audio= é“¾æ¥
    - ğŸ’¡ å¦‚æœä½äºå½¢å¦‚ =- [[video:video.mp4#00:03:24][00:03:24]] description= çš„åˆ—è¡¨ä¸­ï¼Œç›´æ¥ =<M-return>= æ–°å»ºåˆ—è¡¨é¡¹å°±ä¼šè‡ªåŠ¨æ’å…¥å¯¹åº”çš„é“¾æ¥ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ =i=
    - ğŸ’¡ è§†é¢‘çš„è·¯å¾„æ ¼å¼ä¸ =org-link-file-path-type= ä¸€è‡´
    - ğŸ’¡ å¦‚æœè®¾ç½® =org-media-note-cursor-start-position= ä¸º =before= ï¼Œåˆ™æ’å…¥é“¾æ¥åå…‰æ ‡è·³è½¬åˆ°é“¾æ¥çš„å¼€å§‹ä½ç½®ã€‚æ­¤é€‰é¡¹åªåœ¨å•ç‹¬æ’å…¥é“¾æ¥æ—¶èµ·ä½œç”¨ï¼Œå¯¹é€šè¿‡ =<M-return>= è‡ªåŠ¨æ’å…¥çš„æ—¶é—´æˆ³ä¸èµ·ä½œç”¨ã€‚
  + =a= å°†å…‰æ ‡æ‰€åœ¨ä½ç½®çš„é“¾æ¥ï¼Œè°ƒæ•´ä¸ºå½“å‰æ’­æ”¾ä½ç½®ã€‚å¹¶å°†è¯¥æ—¶é—´åç§»ï¼ˆoffsetï¼‰ï¼Œåº”ç”¨åˆ°å½“å‰ç¬”è®°çš„å…¶ä»–é“¾æ¥ã€‚é€‚åˆå¯¼å…¥org-timeråï¼Œæˆ–è€…æ›´æ–°è§†é¢‘åï¼Œç»Ÿä¸€è°ƒæ•´åç§»ã€‚
  + =S= å¦‚æœå½“å‰æ²¡æœ‰ab-loopï¼Œæ’å…¥å½“å‰çš„è§†é¢‘æˆªå›¾ (=org-media-note-insert-screenshot=)ï¼Œå¦åˆ™æ’å…¥å½“å‰ab-loopçš„è§†é¢‘ç‰‡æ®µæˆ–GIFï¼ˆ=org-media-note-capture-ab-loop-and-insert=ï¼‰ã€‚
    - â„¹ ç›¸å…³å˜é‡:
      + =org-media-note-screenshot-save-method= : å®šä¹‰æˆªå›¾çš„ä¿å­˜ä½ç½®
        - directory: ä¿å­˜åˆ° =org-media-note-screenshot-image-dir=
        - attach: ä¿å­˜åˆ°å¯¹åº” org-attach-dir.
      + =org-media-note-screenshot-link-type-when-save-in-attach-dir= å½“ä¿å­˜åˆ°å¯¹åº” org-attach-diræ—¶ï¼Œä½¿ç”¨fileé“¾æ¥æˆ–attachmenté“¾æ¥
      + å›¾ç‰‡çš„è·¯å¾„æ ¼å¼ä¸ =org-link-file-path-type= ä¸€è‡´
      + =org-media-note-capture-ab-loop-functions-alist= å®šä¹‰äº†æˆªå–ab-loopç‰‡æ®µçš„å‡½æ•°åˆ—è¡¨ï¼Œé»˜è®¤æœ‰æˆªå–åŸå§‹ç‰‡æ®µå’Œè½¬ä¸ºgifä¸¤ç§ã€‚
  + =s= æ’å…¥å½“å‰çš„å­—å¹•æ–‡æœ¬ (=org-media-note-insert-sub-text=)
  + =H-m= åˆå¹¶æ‰€é€‰é¡¹ä¸ºä¸€æ¡ï¼Œåªä¿ç•™ç¬¬ä¸€æ¡çš„æ—¶é—´æˆ³ã€‚é€‚åˆå¯¼å…¥å­—å¹•ä¹‹åçš„å¤„ç† (=org-media-note-merge-item=)
- Import: å¯¼å…¥
  + =I p= ä»å·²æœ‰çš„PotPlayer PBFæ–‡ä»¶å¯¼å…¥ç¬”è®°ï¼Œä¼šå°è¯•æœå¯»å½“å‰æ¡ç›®å¯¹åº”çš„åª’ä½“æ–‡ä»¶çš„åŒåPBF (=org-media-note-insert-note-from-pbf=)
  + =I n= ä»å·²æœ‰çš„Noted TXTæ–‡ä»¶å¯¼å…¥ç¬”è®° (=org-media-note-insert-note-from-noted=)
  + =I t= ä» org-timer å½¢å¼çš„åˆ—è¡¨å¯¼å…¥ç¬”è®° (=org-media-note-convert-from-org-timer=)
  + =I s= ä» srt å­—å¹•æ–‡ä»¶å¯¼å…¥ï¼Œä¼šå°è¯•æœå¯»åŒåsrt (=org-media-note-insert-note-from-srt=)
  + =I c= ä»ç« èŠ‚åˆ—è¡¨å¯¼å…¥ (=org-media-note-insert-note-from-chapter-list=)
- Configï¼šåŠŸèƒ½è®¾ç½®
  + =t m= å¯ç”¨åï¼Œåœ¨å½¢å¦‚ =- [[video:video.mp4#00:03:24][00:03:24]] description= çš„åˆ—è¡¨ä¸­ï¼Œ =<M-return>= æ–°å»ºåˆ—è¡¨é¡¹ä¼šè‡ªåŠ¨æ’å…¥å¯¹åº”æ—¶é—´æˆ³é“¾æ¥ã€‚
  + =t s= å¯ç”¨åï¼Œ =<M-return>= æ–°å»ºåˆ—è¡¨é¡¹æ—¶é™¤äº†è‡ªåŠ¨æ’å…¥å¯¹åº”é“¾æ¥ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ’å…¥å½“å‰è§†é¢‘æˆªå›¾
  + =t l= è®¾ç½®æˆªå–ab-loopç‰‡æ®µçš„æ–¹æ³•
  + =t c= å¯ç”¨æ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨ =videocite= æˆ– =audiocite= é“¾æ¥ï¼Œè€Œé =video= æˆ– =audio= é“¾æ¥
  + =t p= å¯ç”¨åï¼Œä¼šåœ¨æ’å…¥é“¾æ¥åï¼Œè‡ªåŠ¨æš‚åœåª’ä½“
  + =t S= å¯ç”¨åï¼Œä¿å­˜çš„æˆªå›¾åŒ…å«å­—å¹•ï¼Œå¦åˆ™ä¸åŒ…å«å­—å¹•
  + =t t= åˆ‡æ¢æ—¶é—´æˆ³çš„æ ¼å¼ï¼š=hh:mm:ss= / =hh:mm:ss.fff=
  + =t M= è®¾ç½®æ‰§è¡Œåˆå¹¶æ‰€é€‰é¡¹æ—¶çš„è¿æ¥ç¬¦

â„¹ æœ«å°¾æ‹¬å·ä¸ºè°ƒç”¨çš„å‡½æ•°ï¼Œæ²¡æœ‰æ ‡æ³¨çš„åŠŸèƒ½å¤šä¸ºç›´æ¥è°ƒç”¨mpvå‘½ä»¤ï¼Œå¯æŸ¥é˜… =org-media-note-pretty-hydra= äº†è§£æ›´å¤šã€‚


** transient ui

transientç•Œé¢ä¸pretty-hydraç•Œé¢çš„åŠŸèƒ½å’ŒæŒ‰é”®ä¸€è‡´ã€‚

ä¸ºäº†é€‚åº”æ›´ç´§å‡‘çš„å¸ƒå±€ï¼ŒåŠŸèƒ½è®¾ç½®ç­‰å‘½ä»¤è¿›è¡Œäº†è¯­ä¹‰åŒ–åˆ†ç»„ï¼š

[[../demo/org-media-note-transient.png?raw=true]]

* ä¾èµ–
- [[https://github.com/kljohann/mpv.el][mpv.el]] åª’ä½“çš„æ’­æ”¾ä¸åŠŸèƒ½æ¥å£
- ç›®å‰æä¾› 2 ç§å‰ç«¯ï¼Œé€šè¿‡ =org-media-note-interface= æ¥è‡ªå®šä¹‰ï¼š
  + [[https://github.com/magit/transient][transient]]ï¼ˆé»˜è®¤ï¼‰ï¼šè‡ª Emacs 28 èµ·å†…ç½®äº Emacs ä¸­ï¼Œæ˜¾ç¤ºåœ¨å½“å‰ window åº•éƒ¨ã€‚
  + [[https://github.com/jerrypnz/major-mode-hydra.el][pretty-hydra]]ï¼šåˆ›å»ºæ›´ç¾è§‚ã€æ˜“ç”¨çš„Hydraç•Œé¢ï¼Œæ˜¾ç¤ºåœ¨å½“å‰ Frame åº•éƒ¨ã€‚

å¦‚æœè¦é…åˆ org-ref ç¬”è®°ä½¿ç”¨ï¼Œå½“ç„¶éœ€è¦å®‰è£… [[https://github.com/jkitchin/org-ref][org-ref]]ã€‚
** åœ¨çº¿è§†é¢‘æ’­æ”¾

ä½¿ç”¨ org-media-note æ¥è¿›è¡Œåœ¨çº¿è§†é¢‘çš„ç¬”è®°ä¾èµ–äº mpv çš„æµåª’ä½“æ’­æ”¾åŠŸèƒ½ï¼Œéœ€è¦é¢å¤–çš„å¤–éƒ¨ä¾èµ–ï¼š
- [[https://github.com/yt-dlp/yt-dlp?tab=readme-ov-file#installation][yt-dlp/yt-dlp: A youtube-dl fork with additional features and fixes]]: ç”¨äºä¸‹è½½ç½‘ç«™è§†é¢‘ï¼Œæ”¯æŒçš„ç½‘ç«™å‚è§[[https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md][æ­¤å¤„]]ã€‚å®ƒæ¯”mpv é»˜è®¤ä½¿ç”¨çš„ youtube-dl æ›´æµç•…ä¹Ÿæ›´å¼ºå¤§ã€‚å¦‚æœæƒ³æ’­æ”¾åœ¨çº¿è§†é¢‘ä½†æ˜¯æ²¡æœ‰å®‰è£… yt-dlpï¼Œorg-media-note ä¼šæŠ¥é”™æç¤ºã€‚
- [[https://github.com/UlyssesZh/yt-dlp-danmaku/][UlyssesZh/yt-dlp-danmaku: yt-dlp plugin for converting Bilibili danmaku into ASS format]]ï¼šå¦‚æœéœ€è¦åŠ è½½bilibiliçš„å¼¹å¹•ã€‚

å¯ä»¥åœ¨ä»¥ä¸‹å‡ å¤„è¿›è¡Œè®¾ç½®ï¼Œä¼˜å…ˆçº§ç”±ä½åˆ°é«˜ï¼š

1. =mpv.conf= æ–‡ä»¶ï¼šmpv çš„é€šç”¨è®¾ç½®
2. =org-media-note-mpv-general-options=å˜é‡ï¼šé…ç½®org-media-noteä¸­çš„é€šç”¨è®¾ç½®ã€‚é»˜è®¤å€¼æŒ‡å®šä½¿ç”¨ yt-dlp æ¥ä¸‹è½½ï¼š
    #+begin_src ini
    --script-opts=ytdl_hook-ytdl_path=yt-dlp
    #+end_src
3. =org-media-note-mpv-online-website-options-alist= å˜é‡ï¼šé…ç½®ç½‘ç«™çš„å•ç‹¬è®¾ç½®ï¼Œä¾‹å¦‚bilibiliéœ€è¦ä¸‹è½½æ‰€æœ‰å­—å¹•å’Œå¼¹å¹•ï¼Œè€Œyoutubeè‡ªåŠ¨ç”Ÿæˆçš„å­—å¹•åªéœ€è¦ä¸‹è½½æŒ‡å®šçš„è¯­è¨€ã€‚
   - é»˜è®¤é…ç½®ï¼Œyoutubeä¼šä¸‹è½½ä¸­è‹±å­—å¹•ï¼Œbilibiliä¼šåŠ è½½æ‰€æœ‰å­—å¹•å’Œå¼¹å¹•ã€‚bilibiliçš„å­—å¹•åŠŸèƒ½éœ€è¦åŠ è½½cookiesï¼Œè·å–ç™»å½•ä¿¡æ¯ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œå‚è§ [[https://github.com/yt-dlp/yt-dlp/wiki/FAQ#how-do-i-pass-cookies-to-yt-dlp][FAQ Â· yt-dlp/yt-dlp Wiki]]
4. =org-media-note-mpv-webstream-download-path= å˜é‡ï¼šé…ç½®åœ¨çº¿è§†é¢‘å­—å¹•ç­‰æ–‡ä»¶çš„ä¸‹è½½ç›®å½•ã€‚é»˜è®¤ä¸ºä¸´æ—¶æ–‡ä»¶å¤¹ã€‚å¦‚æœè®¾ç½®ä¸ºnilï¼Œä¼šä¸‹è½½åˆ°å½“å‰ç›®å½•ã€‚

åªè¦ä½ èƒ½åœ¨ mpv ä¸­æ­£å¸¸çš„åŠ è½½å­—å¹•ï¼Œé‚£ä¹ˆï¼Œorg-media-note å°±å¯ä»¥åƒå¤„ç†æœ¬åœ°åª’ä½“ä¸€æ ·ï¼Œæ§åˆ¶æ’­æ”¾ã€æ’å…¥æ—¶é—´æˆ³å’Œæˆªå›¾ï¼Œç”šè‡³æ˜¯å¯¼å…¥å­—å¹•ï¼


ä¸‹å›¾æ¼”ç¤ºäº†æ’­æ”¾bilibiliè§†é¢‘ï¼Œå¼¹å¹•å¯¼èˆªï¼Œåˆ‡æ¢å­—å¹•ï¼Œå¯¼å…¥å­—å¹•ç­‰åŠŸèƒ½ï¼š
[[../demo/org-media-note-online-video-zh.gif?raw=true]]
